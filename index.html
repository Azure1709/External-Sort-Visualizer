<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="·ª®ng d·ª•ng minh h·ªça thu·∫≠t to√°n External Merge Sort v·ªõi visualization">
    <title>External Sort Visualizer - Minh H·ªça S·∫Øp X·∫øp Ngo·∫°i</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="background-gradient"></div>

    <main class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">
                <span class="icon">üìä</span>
                External Sort Visualizer
            </h1>
            <p class="subtitle">Minh h·ªça thu·∫≠t to√°n External Merge Sort v·ªõi s·ªë th·ª±c 8 bytes</p>
        </header>

        <!-- Main Card -->
        <div class="glass-card main-card">
            <!-- Input Section -->
            <section class="input-section" id="inputSection">
                <h2 class="section-title">üìä Nh·∫≠p d·ªØ li·ªáu</h2>

                <!-- Tab buttons -->
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="random">üé≤ Random</button>
                    <button class="tab-btn" data-tab="manual">‚úèÔ∏è Nh·∫≠p tay</button>
                    <button class="tab-btn" data-tab="file">üìÅ T·∫£i file</button>
                </div>

                <!-- Random Tab -->
                <div class="tab-content active" id="randomTab">
                    <div class="random-controls">
                        <div class="input-group">
                            <label>S·ªë l∆∞·ª£ng ph·∫ßn t·ª≠:</label>
                            <input type="number" id="randomCount" value="20" min="2" max="100">
                        </div>
                        <div class="input-group">
                            <label>Gi√° tr·ªã nh·ªè nh·∫•t:</label>
                            <input type="number" id="randomMin" value="1" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Gi√° tr·ªã l·ªõn nh·∫•t:</label>
                            <input type="number" id="randomMax" value="100" step="0.1">
                        </div>
                        <button class="btn btn-primary" id="generateBtn">
                            <span class="btn-icon">üé≤</span>
                            T·∫°o d√£y s·ªë ng·∫´u nhi√™n
                        </button>
                    </div>
                </div>

                <!-- Manual Tab -->
                <div class="tab-content" id="manualTab">
                    <div class="manual-input">
                        <p class="input-hint">Nh·∫≠p c√°c s·ªë c√°ch nhau b·∫±ng d·∫•u c√°ch ho·∫∑c d·∫•u ph·∫©y:</p>
                        <textarea id="manualInput" placeholder="V√≠ d·ª•: 23 87 15 67 34 92 5 77 11 42"></textarea>
                        <button class="btn btn-primary" id="parseBtn">
                            <span class="btn-icon">‚úÖ</span>
                            S·ª≠ d·ª•ng d√£y s·ªë n√†y
                        </button>
                    </div>
                </div>

                <!-- File Tab -->
                <div class="tab-content" id="fileTab">
                    <div class="upload-zone" id="uploadZone">
                        <div class="upload-icon">üìÅ</div>
                        <h3>K√©o th·∫£ t·ªáp v√†o ƒë√¢y</h3>
                        <p>ho·∫∑c</p>
                        <label class="upload-btn" for="fileInput">Ch·ªçn t·ªáp nh·ªã ph√¢n</label>
                        <input type="file" id="fileInput" accept=".bin,.dat" hidden>
                        <p class="upload-hint">H·ªó tr·ª£: .bin, .dat (s·ªë th·ª±c 8-bytes Double)</p>
                    </div>
                </div>
            </section>

            <!-- Data Preview -->
            <section class="data-preview hidden" id="dataPreview">
                <h3>üìã D·ªØ li·ªáu ƒë·∫ßu v√†o (<span id="elementCount">0</span> ph·∫ßn t·ª≠)</h3>
                <div class="data-display" id="dataDisplay"></div>
            </section>

            <!-- Algorithm Config -->
            <section class="config-section hidden" id="configSection">
                <h3>‚öôÔ∏è C·∫•u h√¨nh thu·∫≠t to√°n</h3>

                <div class="config-grid">
                    <!-- RAM Limit -->
                    <div class="config-card">
                        <div class="config-header">
                            <span class="config-icon">üíæ</span>
                            <span class="config-title">Gi·ªõi h·∫°n RAM (M)</span>
                            <span class="config-value" id="ramValue">5</span>
                            <span class="config-unit">ph·∫ßn t·ª≠</span>
                        </div>
                        <input type="range" class="config-slider slider-blue" id="ramSlider" min="2" max="20" value="5">
                        <p class="config-hint">üí° S·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ t·ªëi ƒëa c√≥ th·ªÉ ch·ª©a trong b·ªô nh·ªõ ch√≠nh c√πng
                            l√∫c.</p>
                    </div>

                    <!-- K-Way Merge -->
                    <div class="config-card">
                        <div class="config-header">
                            <span class="config-icon">üîÄ</span>
                            <span class="config-title">S·ªë lu·ªìng Merge (K)</span>
                            <span class="config-value" id="kWayValue">2</span>
                            <span class="config-unit">run</span>
                        </div>
                        <input type="range" class="config-slider slider-orange" id="kWaySlider" min="2" max="8"
                            value="2">
                        <p class="config-hint">üí° S·ªë run ƒë∆∞·ª£c merge c√πng l√∫c trong m·ªói pass.</p>
                    </div>
                </div>

                <!-- Performance Estimation -->
                <div class="estimation-card">
                    <div class="estimation-header">
                        <span class="estimation-icon">üìä</span>
                        <span class="estimation-title">∆Ø·ªöC T√çNH HI·ªÜU SU·∫§T</span>
                    </div>
                    <div class="estimation-grid">
                        <div class="estimation-item">
                            <div class="estimation-label">S·ªê RUN (CHUNK)</div>
                            <div class="estimation-value" id="estRuns">-</div>
                        </div>
                        <div class="estimation-item">
                            <div class="estimation-label">S·ªê PASS</div>
                            <div class="estimation-value" id="estPass">-</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Control Section -->
            <section class="control-section hidden" id="controlSection">
                <button class="btn btn-primary" id="sortBtn">
                    <span class="btn-icon">‚ö°</span>
                    B·∫Øt ƒë·∫ßu s·∫Øp x·∫øp
                </button>
                <button class="btn btn-secondary" id="resetBtn">
                    <span class="btn-icon">üîÑ</span>
                    Ch·ªçn t·ªáp kh√°c
                </button>
            </section>

            <!-- Progress Section -->
            <section class="progress-section hidden" id="progressSection">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p class="progress-text" id="progressText">ƒêang x·ª≠ l√Ω...</p>
            </section>

            <!-- Visualization Section -->
            <section class="visualization-section hidden" id="visualizationSection">
                <h3 class="viz-title">Qu√° tr√¨nh s·∫Øp x·∫øp</h3>

                <!-- Step Info - Ghi ch√∫ c√°c b∆∞·ªõc -->
                <div class="step-info" id="stepInfo">
                    <div class="step-info-header">
                        <span class="step-badge" id="stepBadge">B∆∞·ªõc 0</span>
                        <span class="step-phase" id="stepPhase">Chu·∫©n b·ªã</span>
                    </div>
                    <p class="step-detail" id="stepDetail">ƒêang kh·ªüi t·∫°o...</p>
                </div>

                <div class="viz-container" id="vizContainer"></div>
                <div class="viz-controls">
                    <button class="btn btn-small" id="prevStepBtn">‚èÆ Tr∆∞·ªõc</button>
                    <button class="btn btn-small btn-primary" id="playPauseBtn">‚ñ∂ Ch·∫°y</button>
                    <button class="btn btn-small" id="nextStepBtn">Sau ‚è≠</button>
                    <div class="speed-control">
                        <label>T·ªëc ƒë·ªô:</label>
                        <input type="range" id="speedSlider" min="1" max="10" value="5">
                    </div>
                </div>
                <div class="viz-legend">
                    <div class="legend-item">
                        <span class="legend-color comparing"></span>
                        <span>ƒêang so s√°nh</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color merging"></span>
                        <span>ƒêang tr·ªôn</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color sorted"></span>
                        <span>ƒê√£ s·∫Øp x·∫øp</span>
                    </div>
                </div>
            </section>

            <!-- Result Section -->
            <section class="result-section hidden" id="resultSection">
                <!-- Animated Check Icon -->
                <div class="result-check-icon">
                    <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                        <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none" />
                        <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                    </svg>
                </div>

                <h3>üéâ S·∫Øp x·∫øp ho√†n t·∫•t!</h3>
                <p class="result-subtitle">D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c s·∫Øp x·∫øp th√†nh c√¥ng v·ªõi External Sort.</p>

                <!-- Action Buttons -->
                <div class="result-actions">
                    <button class="btn btn-primary" id="downloadBtn">
                        <span class="btn-icon">üíæ</span>
                        T·∫£i Binary (.bin)
                    </button>
                    <button class="btn btn-secondary" id="downloadTxtBtn">
                        <span class="btn-icon">üìÑ</span>
                        T·∫£i Text (.txt)
                    </button>
                    <button class="btn btn-secondary" id="newSortBtn">
                        <span class="btn-icon">üîÑ</span>
                        L√†m M·ªõi
                    </button>
                </div>

                <!-- Stats Grid -->
                <div class="result-stats-grid">
                    <div class="stat-card stat-blue">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-label">T·ªîNG PH·∫¶N T·ª¨</div>
                        <div class="stat-value" id="statTotal">0</div>
                    </div>
                    <div class="stat-card stat-purple">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-label">S·ªê RUN</div>
                        <div class="stat-value" id="statRuns">0</div>
                    </div>
                    <div class="stat-card stat-orange">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-label">S·ªê B∆Ø·ªöC</div>
                        <div class="stat-value" id="statSteps">0</div>
                    </div>
                    <div class="stat-card stat-green">
                        <div class="stat-icon">üîÄ</div>
                        <div class="stat-label">SO S√ÅNH</div>
                        <div class="stat-value" id="statComparisons">0</div>
                    </div>
                </div>

                <!-- Additional Info -->
                <div class="result-info-row">
                    <div class="info-box">
                        <span class="info-box-icon">üíæ</span>
                        <div>
                            <div class="info-box-label">RAM BUFFER (M)</div>
                            <div class="info-box-value" id="statRam">5 ph·∫ßn t·ª≠</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <span class="info-box-icon">üîÑ</span>
                        <div>
                            <div class="info-box-label">K-WAY MERGE</div>
                            <div class="info-box-value" id="statKWay">2-way</div>
                        </div>
                    </div>
                </div>

                <!-- Result Preview -->
                <div class="result-preview">
                    <h4>üìã Xem tr∆∞·ªõc k·∫øt qu·∫£</h4>
                    <div class="result-data" id="resultData"></div>
                    <div class="result-minmax">
                        <div class="minmax-box min">
                            <span>‚Üì MIN</span>
                            <span class="minmax-value" id="statMin">0</span>
                        </div>
                        <div class="minmax-box max">
                            <span>‚Üë MAX</span>
                            <span class="minmax-value" id="statMax">0</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Algorithm Info -->
        <div class="glass-card info-card">
            <!-- External Sort l√† g√¨ -->
            <div class="info-header">
                <span class="info-icon">üìñ</span>
                <h3>T√¨m hi·ªÉu v·ªÅ External Sort</h3>
            </div>
            <p class="info-description">
                Khi d·ªØ li·ªáu <em>v∆∞·ª£t qu√° dung l∆∞·ª£ng RAM</em>, ta kh√¥ng th·ªÉ s·∫Øp x·∫øp tr·ª±c ti·∫øp trong b·ªô nh·ªõ.
                <strong>External Sort</strong> gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y b·∫±ng c√°ch chia nh·ªè d·ªØ li·ªáu th√†nh c√°c
                <strong>Run</strong> (kh·ªëi con), x·ª≠ l√Ω t·ª´ng ph·∫ßn r·ªìi <strong>tr·ªôn (Merge)</strong> ch√∫ng l·∫°i.
            </p>

            <div class="phase-buttons">
                <div class="phase-btn">
                    <span class="phase-number">‚ë†</span>
                    Giai ƒëo·∫°n 1: T·∫°o Run
                </div>
                <div class="phase-btn phase-primary">
                    <span class="phase-number">‚ë°</span>
                    Giai ƒëo·∫°n 2: Tr·ªôn K-Way
                </div>
            </div>

            <!-- Accordion -->
            <div class="accordion">
                <div class="accordion-item">
                    <button class="accordion-header" onclick="this.parentElement.classList.toggle('active')">
                        <span>‚öôÔ∏è Nguy√™n l√Ω ho·∫°t ƒë·ªông</span>
                        <span class="accordion-icon">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="algorithm-steps">
                            <div class="step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <strong>Ph√¢n chia (Split)</strong>
                                    <p>ƒê·ªçc t·ª´ng ph·∫ßn d·ªØ li·ªáu v·ª´a v·ªõi RAM (M ph·∫ßn t·ª≠), t·∫°o th√†nh c√°c Run ri√™ng
                                        bi·ªát</p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <strong>S·∫Øp x·∫øp n·ªôi b·ªô</strong>
                                    <p>M·ªói Run ƒë∆∞·ª£c s·∫Øp x·∫øp trong RAM b·∫±ng thu·∫≠t to√°n nhanh (QuickSort,
                                        Insertion Sort)
                                    </p>
                                </div>
                            </div>
                            <div class="step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <strong>Tr·ªôn ƒëa chi·ªÅu (K-Way)</strong>
                                    <p>L·∫•y K runs, so s√°nh ph·∫ßn t·ª≠ ƒë·∫ßu m·ªói run, ch·ªçn nh·ªè nh·∫•t ghi ra output</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header" onclick="this.parentElement.classList.toggle('active')">
                        <span>üìä Ph√¢n t√≠ch ƒë·ªô ph·ª©c t·∫°p</span>
                        <span class="accordion-icon">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <ul class="example-list">
                            <li><strong>Th·ªùi gian:</strong> O(N √ó log N) - t∆∞∆°ng ƒë∆∞∆°ng c√°c thu·∫≠t to√°n s·∫Øp x·∫øp
                                t·ªëi ∆∞u
                            </li>
                            <li><strong>B·ªô nh·ªõ:</strong> O(M) - ch·ªâ c·∫ßn M ph·∫ßn t·ª≠ trong RAM c√πng l√∫c</li>
                            <li><strong>I/O:</strong> O(N/B √ó log<sub>K</sub>(N/M)) - v·ªõi B l√† k√≠ch th∆∞·ªõc block
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header" onclick="this.parentElement.classList.toggle('active')">
                        <span>üí° V√≠ d·ª• minh h·ªça</span>
                        <span class="accordion-icon">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <ul class="example-list">
                            <li><strong>Input:</strong> [8, 3, 7, 1, 5, 9, 2, 6, 4] v·ªõi M=3, K=2</li>
                            <li><strong>B∆∞·ªõc 1:</strong> T·∫°o Run ‚Üí [3,7,8], [1,5,9], [2,4,6]</li>
                            <li><strong>B∆∞·ªõc 2:</strong> Merge 2 run ƒë·∫ßu ‚Üí [1,3,5,7,8,9]</li>
                            <li><strong>B∆∞·ªõc 3:</strong> Merge v·ªõi run c√≤n l·∫°i ‚Üí [1,2,3,4,5,6,7,8,9] ‚úÖ</li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header" onclick="this.parentElement.classList.toggle('active')">
                        <span>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng</span>
                        <span class="accordion-icon">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <ul class="example-list">
                            <li><strong>M l·ªõn h∆°n:</strong> √çt run h∆°n ‚Üí √çt l·∫ßn merge ‚Üí Nhanh h∆°n</li>
                            <li><strong>K l·ªõn h∆°n:</strong> Merge nhi·ªÅu run c√πng l√∫c ‚Üí √çt pass h∆°n</li>
                            <li><strong>D·ªØ li·ªáu ƒë√£ s·∫Øp:</strong> V·∫´n t·∫°o run nh∆∞ng merge hi·ªáu qu·∫£ h∆°n</li>
                            <li><strong>·ª®ng d·ª•ng:</strong> Database, Big Data, x·ª≠ l√Ω log file l·ªõn</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>



    <script src="js/app.js"></script>
</body>

</html>